<!DOCTYPE html>
<html>
<head>
    <title>To-Do List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>My To-Do List</h1>

    <form id="todo-form">
        <input type="text" id="task-input" placeholder="Enter a task" required>
        <button type="submit">Add</button>
    </form>

    <ul id="todo-list">
        {% for t in todos %}
        <li>
            {{ t.task }}
            <button onclick="deleteTask({{ t.id }})">Delete</button>
        </li>
        {% endfor %}
    </ul>

<script>
document.getElementById("todo-form").addEventListener("submit", async function(e){
    e.preventDefault();

    const task = document.getElementById("task-input").value;

    await fetch("/api/todo", {
        method: "POST",
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({task})
    });

    location.reload();
});

async function deleteTask(id){
    await fetch("/api/todo/" + id, { method: "DELETE" });
    location.reload();
}
</script>

</body>
</html>
